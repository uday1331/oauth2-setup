[   
  {
    "id": "hydra-port1",
    "upstream": {
      "url": "http://hydra:4445/",
      "preserve_host":true
    },
    "match": {
      "url": "http://<127.0.0.1|localhost>:4455/<(?!oauth2).*>",
      "methods": [
        "GET"
      ]
    },
    "authenticators": [{ "handler": "noop" }],
    "authorizer": { "handler": "allow" },
    "mutators": [{ "handler": "noop" }],
    "errors": [
        {
          "handler": "json"
        }
      ]
  }, 
  {
    "id": "hydra-port2",
    "upstream": {
      "url": "http://hydra:4444/",
      "preserve_host":true
    },
    "match": {
      "url": "http://<127.0.0.1|localhost>:4455/<(oauth2)>/<.*>",
      "methods": [
        "GET","POST"
      ]
    },
    "authenticators": [{ "handler": "noop" }],
    "authorizer": { "handler": "allow" },
    "mutators": [
      { 
        "handler": "id_token",
        "config":{
          "issuer_url":"http://localhost:4455/",
          "jwks_url": "file:///jwks.json"
        }
      }
    ],
    "errors": [
        {
          "handler": "json"
        }
      ]
    }
]
